<div>
  <!-- SEARCH -->
  <div class="search-menu">
    <div class="icon-menu">
      <mat-icon (click)="openMenu()">menu</mat-icon>
    </div>

    <div class="input-wrapper">
      <mat-icon class="input-icon">search</mat-icon>
      <input
        [(ngModel)]="filtroTexto"
        type="text"
        placeholder="Buscar por Placa o Cliente..."
        class="input"
      />
    </div>
  </div>

  <!-- HEADER -->
  <div class="header-secuence">
    <div style="display: flex; flex-direction: column; gap: 0.4rem;">
      <div class="selected">Gestión de Vehículos</div>
      <div class="subTitle">Inventario de vehículos premium</div>
    </div>

    <div style="display: flex; gap: 0.5rem;">
      <button class="btn btn-create" (click)="openCreateDialog()">
        <mat-icon>add</mat-icon> Nuevo Vehículo
      </button>
    </div>
  </div>

  <!-- CARDS RESUMEN -->
  <div class="container-card">
    <div class="card">
      <div class="card-title">Total de Vehículos</div>
      <div class="card-value">{{ vehiculos.length }}</div>
      <div class="footer-card">En base de datos</div>
    </div>

    <div class="card">
      <div class="card-title">Activos</div>
      <div class="card-value">{{ getActivosCount() }}</div>
      <div class="footer-card">Disponibles</div>
    </div>

    <div class="card">
      <div class="card-title">Marca más frecuente</div>
      <div class="card-value">{{ marcaMasFrecuente || '-' }}</div>
      <div class="footer-card">Top en lista</div>
    </div>
  </div>

  <!-- LISTADO EN CARDS -->
  <div class="cards-container">

    <div
      class="card-vehiculo"
      *ngFor="let v of vehiculos | filtroVehiculo:filtroTexto"
      (click)="openEditDialog(v)"
    >

      <!-- IMAGEN OPCIONAL -->
      <div class="image">
        <img
          [src]="getVehicleImage(v)"
          alt="Vehículo"
          (error)="onImgError($event)"
        />
      </div>

      <div class="card-details">

        <!-- MODELO -->
        <div class="card-description">
          {{ v.model?.name }} <span class="muted">• {{ v.brand?.name }}</span>
        </div>

        <!-- Año / Color -->
        <div class="card-anio-color">
          {{ v.year }} • {{ v.color || 'Sin color' }}
        </div>

        <!-- Placa -->
        <div class="card-subDetails">
          <div class="icon">
            <mat-icon>directions_car</mat-icon>
            <div>Placa</div>
          </div>
          <div class="description-subDetail">{{ v.plate }}</div>
        </div>

        <!-- Dueño -->
        <div class="card-subDetails">
          <div class="icon">
            <mat-icon>person</mat-icon>
            <div>Cliente</div>
          </div>
          <div class="description-subDetail">
            {{ v.owner?.name || 'Sin asignar' }}
          </div>
        </div>

        <!-- Kilometraje -->
        <div class="card-subDetails">
          <div class="icon">
            <mat-icon>speed</mat-icon>
            <div>Kilometraje</div>
          </div>
          <div class="description-subDetail">
            {{ v.currentMileageKm || 0 }} km
          </div>
        </div>

        <!-- Estado -->
        <div class="card-subDetails">
          <div class="icon">
            <mat-icon>verified</mat-icon>
            <div>Estado</div>
          </div>

          <div class="description-subDetail">
            <span class="chip activo" *ngIf="v.isActive">Activo</span>
            <span class="chip suspendido" *ngIf="!v.isActive">Inactivo</span>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>
